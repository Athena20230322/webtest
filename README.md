````markdown
# WEBTEST è‡ªå‹•åŒ–æ¸¬è©¦å°ˆæ¡ˆæ“ä½œæ‰‹å†Š

![Last Updated](https://img.shields.io/badge/Last%20Updated-2025--07--14-blue.svg)

æœ¬æ–‡ä»¶æä¾› Webtest å°ˆæ¡ˆçš„æ¨™æº–æ“ä½œæµç¨‹èˆ‡ç›¸é—œæŠ€è¡“èªªæ˜ï¼Œæ—¨åœ¨å”åŠ©åœ˜éšŠæˆå“¡å¿«é€Ÿä¸Šæ‰‹ä¸¦åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦ã€‚

---

## ğŸ§­ ç›®éŒ„
- [1. âš™ï¸ ç’°å¢ƒæº–å‚™ (Environment Setup)](#1--ç’°å¢ƒæº–å‚™-environment-setup)
- [2. ğŸš€ åŸ·è¡Œæ¸¬è©¦ (ä¸»è¦æ–¹å¼)](#2--åŸ·è¡Œæ¸¬è©¦-ä¸»è¦æ–¹å¼)
- [3. ğŸ“œ è…³æœ¬èˆ‡APIåŠŸèƒ½è©³è§£ (é€²éšåƒè€ƒ)](#3--è…³æœ¬èˆ‡apiåŠŸèƒ½è©³è§£-é€²éšåƒè€ƒ)
- [4. ğŸšŒ ä¹˜è»Šç¢¼ (DoPayment) ç›¸é—œè…³æœ¬](#4--ä¹˜è»Šç¢¼-dopayment-ç›¸é—œè…³æœ¬)
- [5. ğŸ”¬ å…¶ä»–ç‰¹æ®Šæ¸¬è©¦](#5--å…¶ä»–ç‰¹æ®Šæ¸¬è©¦)
- [6. ğŸ› ï¸ è¼”åŠ©åˆ†æå·¥å…·](#6--è¼”åŠ©åˆ†æå·¥å…·)

---

## 1. âš™ï¸ ç’°å¢ƒæº–å‚™ (Environment Setup)
åœ¨åŸ·è¡Œä»»ä½•æ¸¬è©¦å‰ï¼Œè«‹å‹™å‹™å¿…å®Œæˆä»¥ä¸‹å…©å€‹ç’°å¢ƒè¨­å®šã€‚

### 1.1 ç¢ºèª Node.js ç‰ˆæœ¬
æœ¬å°ˆæ¡ˆä¾è³´ Node.js ç’°å¢ƒï¼Œè«‹é–‹å•Ÿçµ‚ç«¯æ©Ÿ (Command Prompt) ä¸¦è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç¢ºèªç‰ˆæœ¬è™Ÿæ˜¯å¦æ­£ç¢ºé¡¯ç¤ºã€‚

```shell
C:\webtest> node -v
v18.12.1

C:\webtest> npm -v
8.19.2
````

### 1.2 å•Ÿå‹•æœ¬åœ°ä¼ºæœå™¨

> **âš ï¸ é‡è¦æç¤º**
>
> æ‰€æœ‰æ¸¬è©¦éƒ½ **å¿…é ˆ** åœ¨æœ¬åœ°ä¼ºæœå™¨å•Ÿå‹•çš„ç‹€æ…‹ä¸‹é€²è¡Œã€‚

è«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†é–‹å•Ÿ Express.js æ¸¬è©¦ä¼ºæœå™¨ï¼š

```shell
C:\webtest> node Express.js
```

ä¼ºæœå™¨å•Ÿå‹•å¾Œï¼Œæ‚¨å¯ä»¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ `http://localhost:3000` ç¶²é ï¼Œä»¥åˆ©åŸ·è¡Œéœ€è¦ç¶²é ä»‹é¢çš„æ¸¬è©¦é …ç›®ï¼ˆå¦‚ï¼šç¾é‡‘å„²å€¼ã€ä»˜æ¬¾ã€æˆæ¬Šç¶å®šï¼‰ã€‚

-----

## 2\. ğŸš€ åŸ·è¡Œæ¸¬è©¦ (ä¸»è¦æ–¹å¼)

ç‚ºæ±‚æ–¹ä¾¿å¿«é€Ÿï¼Œå»ºè­°ä½¿ç”¨æ‰¹æ¬¡æª” (`.bat`) çš„æ–¹å¼åŸ·è¡Œæ¸¬è©¦ã€‚

**ğŸ“ æª”æ¡ˆè·¯å¾‘:** `C:\webtest\BAT\`

**ğŸ–±ï¸ æ“ä½œæ–¹å¼:** é€²å…¥ä¸Šè¿°è·¯å¾‘ï¼Œç›´æ¥é»æ“Šå°æ‡‰çš„ `.bat` æª”æ¡ˆå³å¯åŸ·è¡Œã€‚

### çµ±ä¸€è¶…å•†

  - `çµ±ä¸€è¶…å•†åæƒæ‰£æ¬¾.bat`
  - `çµ±ä¸€è¶…å•†åæƒé€€æ¬¾äº¤æ˜“.bat`
  - `çµ±ä¸€è¶…å•†å„²å€¼äº¤æ˜“.bat`
  - `çµ±ä¸€è¶…å•†å„²å€¼é€€æ¬¾.bat`
  - `ç¶å®šçµ±ä¸€è¶…å•†æ­£å¼æœƒå“¡è¨‚é–±ç¶å®š_slack.bat` (æœƒå“¡è¨‚é–±ç¶å®šï¼Œå« Slack é€šçŸ¥)

### åº·æ˜¯ç¾

  - `åº·äº‹ç¾åæƒæ‰£æ¬¾.bat`
  - `åº·äº‹ç¾æ‰£æ¬¾å¾Œé€€æ¬¾.bat`
  - `åº·äº‹ç¾æŸ¥è©¢äº¤æ˜“çµæœ.bat`
  - `åº·äº‹ç¾æƒç„webä»˜æ¬¾Qrcode.bat`

### åšå®¢ä¾†

  - `åšå®¢ä¾†åæƒæ‰£æ¬¾.bat`
  - `åšå®¢ä¾†æƒç„webä»˜æ¬¾Qrcode.bat`

### å¯Œåˆ©é¤é£² (KFC) - å¤šæ­¥é©Ÿæµç¨‹

1.  `Step1å¯Œåˆ©é¤é£²(KFC)ç”¢å‡ºè·³è½‰ä»˜æ¬¾URL.bat`
2.  `Step2å¯Œåˆ©é¤é£²(KFC)ä»˜æ¬¾å®ŒæˆæŸ¥è©¢äº¤æ˜“çµæœ.bat`
3.  `Step3å¯Œåˆ©é¤é£²(KFC)é€€æ¬¾äº¤æ˜“.bat`

### æ˜Ÿå·´å…‹

  - `æ˜Ÿå·´å…‹(å„²å€¼)ç”¢å‡ºè·³è½‰ä»˜æ¬¾URL.bat`
  - `æ˜Ÿå·´å…‹(æ‚ éŠç”Ÿæ´»)æˆæ¬Šç¶å®š_ç›®å‰ç„¡æ³•ä½¿ç”¨è¦V1åˆ‡è‡³V2.bat` (âš ï¸ **æ³¨æ„:** ç›®å‰ç„¡æ³•ä½¿ç”¨)

### æˆæ¬Šç¶å®š

  - `å¤§éƒ½æœƒè»ŠéšŠæˆæ¬Šç¶å®š.bat`
  - `å…ƒå¤§è­‰åˆ¸æŠ•è³‡ä¿¡è¨—æˆæ¬Šç¶å®š.bat`
  - `YOXI æˆæ¬Šç¶å®šUAT.bat` (UAT ç’°å¢ƒ)

### å…¶ä»–å» å•†

  - `å‰›éˆºåœè»Šå ´åæƒæ‰£æ¬¾.bat`
  - `å’Œæ³°è¯ç¶²ä»˜æ¬¾Qrcode.bat`
  - `é‡‘ç®æ£’JGBWebæƒç„webä»˜æ¬¾Qrcode_UAT.bat` (UAT ç’°å¢ƒ)

-----

## 3\. ğŸ“œ è…³æœ¬èˆ‡APIåŠŸèƒ½è©³è§£ (é€²éšåƒè€ƒ)

æ­¤å€æ®µæä¾› `.js` è…³æœ¬èˆ‡å¾Œç«¯ API çš„å°æ‡‰é—œä¿‚ï¼Œä¾›é–‹ç™¼äººå“¡é™¤éŒ¯æˆ–æ‰‹å‹•åŸ·è¡Œæ™‚åƒè€ƒã€‚

| è…³æœ¬åç¨± (.js)              | åŠŸèƒ½èªªæ˜                       | å°æ‡‰ API                  | å‚™è¨»                           |
|-------------------------|----------------------------|-------------------------|------------------------------|
| **åæƒ/Webæƒç¢¼æ”¯ä»˜**          |                            |                         |                              |
| `cosmed.js`             | åº·æ˜¯ç¾ - åæƒæ‰£æ¬¾                 | `ICPOF001`              |                              |
| `simplemart.js`         | ç¾å»‰ç¤¾ - åæƒæ‰£æ¬¾                 | `ICPOF001`              |                              |
| `icashclubno99.js`      | æ„›é‡‘å¡è¤”åˆ©ç¤¾99è™Ÿ-åæƒæ‰£æ¬¾             | `ICPOF001`              |                              |
| `ai-rider.js`           | å‰›éˆºåœè»Šå ´(çµ±ä¸€ç²¾å·¥) - åæƒæ‰£æ¬¾         | `ICPOF001`              |                              |
| `books.js`              | åšå®¢ä¾† - åæƒæ‰£æ¬¾                 | `ICPOF001`              |                              |
| `carrefourUAT.js`       | å®¶æ¨‚è¤” - åæƒæ‰£æ¬¾                 | `ICPOF001`              |                              |
| `dreammall.js`          | é«˜é›„å¤¢æ™‚ä»£ -åæƒæ‰£æ¬¾                | `ICPOF001`              |                              |
| `marketpayment.js`      | çµ±ä¸€è¶…å•† - åæƒä»˜æ¬¾                | `ICPOS001`              |                              |
| `cosmedweb.js`          | åº·æ˜¯ç¾ - æƒæWebä»˜æ¬¾              | `ICPO0008`              |                              |
| `booksweb.js`           | åšå®¢ä¾† - æƒæWebä»˜æ¬¾              | `ICPO0008`              |                              |
| `JGBwebUAT.js`          | é‡‘ç®æ£’JGBWeb - Webä»˜æ¬¾ (æˆ¿æ±001)  | `ICPO0008`              | `UAT ç’°å¢ƒ`                     |
| **ä¸»æƒ/è·³è½‰æ”¯ä»˜**             |                            |                         |                              |
| `kfcjump.js`            | KFC - ç”¢å‡ºè·³è½‰ä»˜æ¬¾URL            | `IPCO0002`              |                              |
| `starbucksjump.js`      | æ˜Ÿå·´å…‹ - ç”¢å‡ºå„²å€¼è·³è½‰URL            | `IPCO0002`              |                              |
| `bookjumpUAT.js`        | åšå®¢ä¾† - ç”¢å‡ºä»˜æ¬¾æˆåŠŸè·³è½‰URL          | `IPCO0002`              |                              |
| `iyugo.js`              | çµ±ä¸€è¶…å•†(éš¨æ™‚å–) - ä¸»æƒQR Code      | `ICPO0001` + `ICPO0002` |                              |
| `iyugoslack.js`         | çµ±ä¸€è¶…å•†(éš¨æ™‚å–) - ä¸»æƒQR Codeä¸¦ç™¼é€é€šçŸ¥ | `(åŒä¸Š)`                  | å« Slack é€šçŸ¥                   |
| `foodomo.js`            | Foodmo ä»˜æ¬¾                  |      `(åŒä¸Š)`                   |     å« Slack é€šçŸ¥                 |
| `obedientstore.js`      | ä¹˜ä¹˜ - ä¸»æƒQR Code             | `ICPO0001` + `ICPO0002` | æœªé–‹å•Ÿ OP é»æ•¸                    |
| `hotaiconnected.js`     | å’Œæ³°è¯ç¶² - ä¸»æƒQR Codeä»˜æ¬¾         | `ICPO0001` + `ICPO0002` |                              |
| `tarokouat.js`          | å¤§é­¯é–£å®èªŒ                      | `ICPO0001`              | `UAT ç’°å¢ƒ`, `2025/05/06`       |
| **äº¤æ˜“é€€æ¬¾**                |                            |                         |                              |
| `cosmedrefund.js`       | åº·æ˜¯ç¾ - é€€æ¬¾                   | `ICPO0004`              | éœ€å…ˆåŸ·è¡Œæ‰£æ¬¾                       |
| `marketpaymentrefund.js` | çµ±ä¸€è¶…å•† - åæƒé€€æ¬¾                | `ICPOS002`              |                              |
| `markettoprefund.js`    | çµ±ä¸€è¶…å•† - å„²å€¼é€€æ¬¾                | `ICPOS005`              | 2025/02/06 é¡¯ç¤ºé€€è²¨å¤±æ•—ï¼Œéœ€åŒåº—é€€       |
| `iyugorefund.js`        | çµ±ä¸€è¶…å•†(éš¨æ™‚å–) - é€€æ¬¾             | `ICPO0004`              | éœ€å…ˆåŸ·è¡Œiyugoquerytrade.jsæŸ¥è©¢     |
| `kfcjumprefund.js`      | KFC - é€€æ¬¾                   | `ICPO0004`              | éœ€å…ˆå®ŒæˆæŸ¥è©¢, `2025/02/23`         |
| **äº¤æ˜“æŸ¥è©¢**                |                            |                         |                              |
| `cosmedquerytrade.js`   | åº·æ˜¯ç¾ - æŸ¥è©¢äº¤æ˜“çµæœ               | `ICPO0005`              | `EncData` éœ€è¼‰å…¥ `MerchantTradeNo` |
| `iyugoquerytrade.js`    | çµ±ä¸€è¶…å•†(éš¨æ™‚å–) - æŸ¥è©¢äº¤æ˜“çµæœ         | `ICPO0005`              |                              |
| `kfcjumpquerytrade.js`  | KFC - æŸ¥è©¢äº¤æ˜“çµæœ               | `ICPO0005`              | `2025/02/23`                 |
| **å„²å€¼**                  |                            |                         |                              |
| `markettopup.js`        | çµ±ä¸€è¶…å•† - å„²å€¼                  | `ICPOS004`              |                              |
| `markettopupuat.js`     | çµ±ä¸€è¶…å•† - å„²å€¼                  | `ICPOS004`              | `UATç’°å¢ƒ`                      |
| **æˆæ¬Šç¶å®š**                |                            |                         |                              |
| `statbucksbinding.js`   | æ˜Ÿå·´å…‹(æ‚ éŠç”Ÿæ´») - æˆæ¬Šç¶å®š           | `ICPOB0000`             | å›ºå®šæ‰£æ¬¾é¡åº¦                       |
| `Mertotaxibinding.js`   | å¤§éƒ½æœƒè»ŠéšŠ - æˆæ¬Šç¶å®š               | `ICPOB0000`             | å›ºå®šæ‰£æ¬¾é¡åº¦                       |
| `Mertotaxibindingtoslack.js` | å¤§éƒ½æœƒè»ŠéšŠ - æˆæ¬Šç¶å®š (å« Slack é€šçŸ¥)  | `ICPOB0000`             |                              |
| `bookhouse.js`          | è²¡åœ˜æ³•äººå­©å­çš„æ›¸å±‹ - æˆæ¬Šç¶å®š           | `ICPOB0000`             | å›ºå®šæ‰£æ¬¾é¡åº¦                       |
| `yoxibinding.js`        | YOXI - æˆæ¬Šç¶å®š                | `ICPOB0000`             | å¯è‡ªè¨‚æ¯æœˆæ‰£æ¬¾ä¸Šé™                    |
| `yoxibindingUAT.js`     | YOXI - æˆæ¬Šç¶å®š                | `ICPOB0000`             | `UAT ç’°å¢ƒ`                     |
| `yuantabinding.js`      | å…ƒå¤§æŠ•ä¿¡ - æˆæ¬Šç¶å®š                | `ICPOB0000`             | å¯è‡ªè¨‚æ¯æœˆæ‰£æ¬¾ä¸Šé™                    |
| `yuantabingingtoslack.js` | å…ƒå¤§æŠ•ä¿¡ - æˆæ¬Šç¶å®š (å« Slack é€šçŸ¥)   | `ICPOB0000`             |                              |
| `binding711paid.js`     | UAT çµ±ä¸€è¶…å•†ä»˜è²»æœƒå“¡               | `(N/A)`                 | å¹´æ‰£å®šé¡å¯æ”¹                       |
| `Mertotaxicancelbinding.js` | å¤§éƒ½æœƒè»ŠéšŠ - å–æ¶ˆæˆæ¬Šç¶å®š             | `ICPO0003`              | éœ€å…ˆæˆåŠŸç¶å®š                       |

> **âš ï¸ é‡è¦æç¤º: æˆæ¬Šç¶å®š**
>
> æˆæ¬Šç¶å®šç›¸é—œæ¸¬è©¦éœ€ä½¿ç”¨å›ºå®šçš„ Webhook URLï¼Œå…¶ç¨‹å¼ç¢¼èˆ‡è³‡æ–™ä¸»è¦å­˜æ”¾åœ¨ `webtes20250123` é›²ç«¯ç¡¬ç¢Ÿã€‚

-----

## 4\. ğŸšŒ ä¹˜è»Šç¢¼ (DoPayment) ç›¸é—œè…³æœ¬

  - **API ç«¯é»:** `/api/V2/Payment/Traffic/DoPayment`
  - **æ“ä½œæµç¨‹:**
    1.  `dopayment.js`: è®€å– `c:\webtest\qrcode.png` åœ–ç‰‡æª”ï¼Œè§£æå‡º `orgQrcode` çš„å€¼ã€‚
    2.  `dopayment2.js`: è¼‰å…¥ä¸Šä¸€æ­¥é©Ÿå–å¾—çš„ `orgQrcode` å€¼ï¼Œå³å¯æ¨¡æ“¬ä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    3.  `processRidePayment.js`: æ•´åˆdopayment and dopayment2 å³å¯æ¨¡æ“¬å¸‚è»Šä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    4.  `processRidePaymentold.js`: æ•´åˆdopayment and dopayment2 å³å¯æ¨¡æ“¬å¸‚è»Šæ•¬è€ç¥¨ä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    5.  `processRidePaymentmrts.js`: æ•´åˆdopayment and dopaymentmrt å³å¯æ¨¡æ“¬åŒ—æ·ä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    6.  `processRidePaymentmrtadult.js`: æ•´åˆdopayment and dopaymentmrt å³å¯æ¨¡æ“¬åŒ—æ·ä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    7.  `processhoshinebusuat.js`: æ•´åˆdopayment and dopaymentmrt å³å¯æ¨¡æ“¬UATå¸‚è»Šä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚
    
     å ±éŒ¯RtnCode:9999
  - Merchant ID èˆ‡ Terminal ID çš„ç¶å®šé—œä¿‚ï¼š
    é›–ç„¶ä½ ç”¨äº†ç¯„ä¾‹ä¸­çš„ terminalId: A01630526ï¼Œä½† Staging Server å¯èƒ½è¦å®šï¼šA01630526 é€™å€‹çµ‚ç«¯æ©Ÿå¿…é ˆéš¸å±¬æ–¼æŸå€‹ç‰¹å®šçš„ merchantIdã€‚
  - å¦‚æœä½ å‚³çš„ 10524012 èˆ‡è©²çµ‚ç«¯æ©Ÿåœ¨å¾Œç«¯ç³»çµ±ä¸­æ²’æœ‰é—œè¯ï¼Œå¾Œç«¯æŸ¥è©¢æ™‚æœƒå™´ Exceptionã€‚
  - æœ¬åœ°æ¸¬è©¦ (Target: Local) âœ… æˆåŠŸï¼š
     é€™è­‰æ˜äº†ä½ çš„ Node.js ç¨‹å¼ç¢¼åœ¨åŠ å¯†é‚è¼¯ (AES/RSA)ã€å°åŒ…çµæ§‹ (JSON)ã€æ™‚é–“æ ¼å¼ã€MAC ç”Ÿæˆã€ç¶²è·¯å‚³è¼¸é€™å¹¾å€‹ç’°ç¯€æ˜¯ 100% æ­£ç¢ºçš„ã€‚
  - å¦‚æœç¨‹å¼ç¢¼æ ¼å¼æœ‰èª¤ï¼Œæœ¬åœ° Server æœƒç›´æ¥å™´éŒ¯ã€‚ 
  - Staging æ¸¬è©¦ (Target: Staging) âŒ å¤±æ•— (9999)ï¼š 
  - é€™èªªæ˜ Staging Server é›–ç„¶æ¥æ”¶ä¸¦è§£é–‹äº†ä½ çš„å°åŒ…ï¼Œä½†åœ¨åŸ·è¡Œã€Œå¾Œç«¯å•†å‹™é‚è¼¯ã€æ™‚ç™¼ç”Ÿäº†å´©æ½°
   
  - **å…¶ä»–ç›¸é—œè…³æœ¬:**
      - `dopaymentmrt.js`: ç›´æ¥æ¨¡æ“¬åŒ—æ·ä¹˜è»Šç¢¼æ‰£æ¬¾ã€‚

-----

## 5\. ğŸ”¬ å…¶ä»–ç‰¹æ®Šæ¸¬è©¦

  - `testcosmedm.js`: åº·æ˜¯ç¾ - é€£çºŒå¤šç­†åæƒæ‰£æ¬¾ (éœ€æ­é… APK ç”¢ç”Ÿçš„å¤šç­†æ¢ç¢¼)ã€‚
  - `testmarketpayment.js`: çµ±ä¸€è¶…å•† - é€£çºŒå¤šç­†åæƒæ‰£æ¬¾ (éœ€æ­é… APK ç”¢ç”Ÿçš„å¤šç­†æ¢ç¢¼)ã€‚
  - `fisckor.js`: éŸ“åœ‹è·¨å¢ƒæ”¯ä»˜ (ä¾è³´è²¡é‡‘å…¬å¸æ¸¬è©¦ç’°å¢ƒ)ã€‚
  - `logreport_generator.py`: ç¶²é å°å·¥å…·ä½¿ç”¨ç‡çµ±è¨ˆã€‚
  - `comedonline3ds.js`: å¾…ä¸­å¿ƒèª¿æ•´okå†æ¬¡ç¢ºèªã€‚
  - Pilot : https://icpbridge.icashsys.com.tw
  - SIT : https://icpbridge-dev.icashsys.com.tw
  - UAT:https://icpbridge-test.icashsys.com.tw

-----

## 6\. ğŸ› ï¸ è¼”åŠ©åˆ†æå·¥å…·

  - **AES åŠ è§£å¯†ç·šä¸Šå·¥å…·**: [http://107.173.165.164/onlineaes.php](http://107.173.165.164/onlineaes.php)

<!-- end list -->

```
```